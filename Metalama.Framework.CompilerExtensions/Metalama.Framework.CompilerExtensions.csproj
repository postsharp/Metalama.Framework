<Project Sdk="Microsoft.NET.Sdk">

    <PropertyGroup>
        <TargetFramework>netstandard2.0</TargetFramework>
        <RootNamespace>Metalama.Framework.CompilerExtensions</RootNamespace>
        <!-- Packaging -->
        <IsPackable>False</IsPackable>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
        <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    </PropertyGroup>

    <ItemGroup>

        <!-- Third-party dependencies -->
        <PackageReference Include="Microsoft.Bcl.HashCode" Version="$(MicrosoftBclHashCodeVersion)" PrivateAssets="all">
            <GeneratePathProperty>true</GeneratePathProperty>
        </PackageReference>
        <EmbeddedResource Include="$(PkgMicrosoft_Bcl_HashCode)\lib\netstandard2.0\Microsoft.Bcl.HashCode.dll" Link="Resources\Microsoft.Bcl.HashCode.dll"/>

        <PackageReference Include="K4os.Hash.xxHash" Version="$(K4osHashxxHashVersion)" PrivateAssets="all">
            <GeneratePathProperty>true</GeneratePathProperty>
        </PackageReference>
        <EmbeddedResource Include="$(PkgK4os_Hash_xxHash)\lib\netstandard2.0\K4os.Hash.xxHash.dll" Link="Resources\K4os.Hash.xxHash.dll"/>

        <PackageReference Include="Newtonsoft.Json" Version="$(NewtonsoftJsonVersion)" PrivateAssets="all">
            <GeneratePathProperty>true</GeneratePathProperty>
        </PackageReference>
        <EmbeddedResource Include="$(PkgNewtonsoft_Json)\lib\netstandard2.0\Newtonsoft.Json.dll" Link="Resources\Newtonsoft.Json.dll"/>

        <!-- First-party dependencies to external repos -->
        <PackageReference Include="Metalama.Backstage" Version="$(MetalamaBackstageVersion)" PrivateAssets="all">
            <GeneratePathProperty>True</GeneratePathProperty>
        </PackageReference>
        <EmbeddedResource Include="$(PkgMetalama_Backstage)\lib\netstandard2.0\Metalama.Backstage.dll" Link="Resources\Metalama.Backstage.dll"/>

        <PackageReference Include="Metalama.Compiler.Sdk" Version="$(MetalamaCompilerVersion)" PrivateAssets="true">
            <GeneratePathProperty>True</GeneratePathProperty>
        </PackageReference>
        <EmbeddedResource Include="$(PkgMetalama_Compiler_Sdk)\lib\netstandard2.0\Metalama.Compiler.Interface.dll" Link="Resources\Metalama.Compiler.Interface.dll"/>
		
		<!-- Project dependencies to ensure correct build order -->
		<ProjectReference Include="..\Metalama.Framework.DesignTime\Metalama.Framework.DesignTime.csproj" ReferenceOutputAssembly="false"/>
		<ProjectReference Include="..\Metalama.Framework.DesignTime.VisualStudio\Metalama.Framework.DesignTime.VisualStudio.csproj" ReferenceOutputAssembly="false"/>
        <!--
		<ProjectReference Include="..\Metalama.Framework.DesignTime.4.0.1\Metalama.Framework.DesignTime.4.0.1.csproj" ReferenceOutputAssembly="false"/>
		<ProjectReference Include="..\Metalama.Framework.DesignTime.VisualStudio.4.0.1\Metalama.Framework.DesignTime.VisualStudio.4.0.1.csproj" ReferenceOutputAssembly="false"/>
		<ProjectReference Include="..\Metalama.Framework.DesignTime.4.1.0\Metalama.Framework.DesignTime.4.1.0.csproj" ReferenceOutputAssembly="false"/>
		<ProjectReference Include="..\Metalama.Framework.DesignTime.VisualStudio.4.1.0\Metalama.Framework.DesignTime.VisualStudio.4.1.0.csproj" ReferenceOutputAssembly="false"/>
        -->

		<!-- Current repo: Version-neutral assemblies -->
        <EmbeddedResource Include="..\Metalama.Framework\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.dll" Link="Resources\Metalama.Framework.dll"/>
        <EmbeddedResource Include="..\Metalama.SystemTypes\bin\$(Configuration)\$(TargetFramework)\Metalama.SystemTypes.dll" Link="Resources\Metalama.SystemTypes.dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.Sdk\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.Sdk.dll" Link="Resources\Metalama.Framework.Sdk.dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.DesignTime.Contracts\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.DesignTime.Contracts.dll" Link="Resources\Metalama.Framework.DesignTime.Contracts.dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.Introspection\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.Introspection.dll" Link="Resources\Metalama.Framework.Introspection.dll"/>

        <!-- Current repo: latest API version -->
        <EmbeddedResource Include="..\Metalama.Framework.Engine\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.Engine.$(RoslynApiMaxVersion).dll" Link="Resources\Metalama.Framework.Engine.$(RoslynApiMaxVersion).dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.DesignTime\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.DesignTime.$(RoslynApiMaxVersion).dll" Link="Resources\Metalama.Framework.DesignTime..$(RoslynApiMaxVersion).dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.DesignTime.VisualStudio\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.DesignTime.VisualStudio.$(RoslynApiMaxVersion).dll" Link="Resources\Metalama.Framework.DesignTime.VisualStudio..$(RoslynApiMaxVersion).dll"/>

        <!-- Current repo: 4.0.1 -->
        <!--
        <EmbeddedResource Include="..\Metalama.Framework.Engine.4.0.1\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.Engine.4.0.1.dll" Link="Resources\Metalama.Framework.Engine.4.0.1.dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.DesignTime.4.0.1\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.DesignTime.4.0.1.dll" Link="Resources\Metalama.Framework.DesignTime.4.0.1.dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.DesignTime.VisualStudio.4.0.1\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.DesignTime.VisualStudio.4.0.1.dll" Link="Resources\Metalama.Framework.DesignTime.VisualStudio.4.0.1.dll"/>
        -->
        <!-- Current repo: 4.1.0 -->
        <!--
        <EmbeddedResource Include="..\Metalama.Framework.Engine.4.1.0\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.Engine.4.1.0.dll" Link="Resources\Metalama.Framework.Engine.4.1.0.dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.DesignTime.4.1.0\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.DesignTime.4.1.0.dll" Link="Resources\Metalama.Framework.DesignTime.4.1.0.dll"/>
        <EmbeddedResource Include="..\Metalama.Framework.DesignTime.VisualStudio.4.1.0\bin\$(Configuration)\$(TargetFramework)\Metalama.Framework.DesignTime.VisualStudio.4.1.0.dll" Link="Resources\Metalama.Framework.DesignTime.VisualStudio.4.1.0.dll"/>
        -->


    </ItemGroup>


    <ItemGroup>
        <Folder Include="Resources\"/>
    </ItemGroup>


</Project>
