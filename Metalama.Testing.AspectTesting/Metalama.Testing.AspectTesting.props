<Project>
    <PropertyGroup>
        <!-- We disable Metalama unconditionally, because referenced projects alphabetically ordered after "Metalama" may inadvertently enable Metalama again. -->
        <MetalamaEnabled>False</MetalamaEnabled>
        <MetalamaTestGenerateDefaultRunner Condition="'$(MetalamaTestGenerateDefaultRunner)'==''">True</MetalamaTestGenerateDefaultRunner>
        <StartupObject Condition="'$(TargetFramework)'=='net6.0'">AutoGeneratedProgram</StartupObject>

        <!-- If the build is deterministic, we can have the error : SourceRoot items must include at least one top-level (not nested) item 
             when DeterministicSourcePaths is true -->
        <Deterministic>False</Deterministic>

        <!-- AssemblyInfo attributes are used to pass info from the msbuild project to the test project. -->
        <GenerateAssemblyInfo>True</GenerateAssemblyInfo>

        <MetalamaTestProjectDirectory Condition="'$(MetalamaTestProjectDirectory)'==''">$(MSBuildProjectDirectory)</MetalamaTestProjectDirectory>

    </PropertyGroup>

    <!-- Enable dynamic file nesting in Visual Studio -->
    <ItemGroup>
        <ProjectCapability Include="ConfigurableFileNesting" />
        <ProjectCapability Include="ConfigurableFileNestingFeatureEnabled" />
    </ItemGroup>

</Project>