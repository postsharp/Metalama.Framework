<Project InitialTargets="ValidateVersion">

  <!-- Imports Directory.Build.props of the upper directory. Use this code in any non-root Directory.Build.* even if the file does not exit. -->
  <Import Project="$([MSBuild]::GetPathOfFileAbove('Directory.Build.props', '$(MSBuildThisFileDirectory)../'))" Condition="Exists('$([MSBuild]::GetPathOfFileAbove(`Directory.Build.props`, `$(MSBuildThisFileDirectory)../`))')" />


  <PropertyGroup>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <DebugCaravelaDesignTime>false</DebugCaravelaDesignTime>
    <!-- Overwrite from the parent directory -->
    <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
  </PropertyGroup>

  
  <!-- Internal NuGet reposority source -->
  <PropertyGroup>
    <RestoreAdditionalProjectSources>$(MSBuildThisFileDirectory)..\..\artifacts\bin\$(Configuration)</RestoreAdditionalProjectSources>
  </PropertyGroup>

  <!-- Versions of dependencies -->
  <PropertyGroup>
    <CaravelaVersion>$(ProductVersion)</CaravelaVersion>
  </PropertyGroup>

  <Target Name="ValidateVersion">
    <Error Text="The ProductVersion property is not defined. Check that Directory.Build.props have been properly imported." Condition="'$(ProductVersion)'==''"/>
  </Target>

</Project>