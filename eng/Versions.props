<Project>

    <!-- Normally you should call build.ps1 -local -prepare before opening the project in an IDE, and it creates CaravelaVersion.props. -->
    <Import Project="CaravelaVersion.props" Condition="Exists('CaravelaVersion.props')" />

    <!-- However, if you don't, default values are used. -->
    <Import Project="MainVersion.props" Condition="!Exists('CaravelaVersion.props')" />
    
    <PropertyGroup Condition="!Exists('CaravelaVersion.props')">
        <CaravelaVersion>$(MainVersion)$(PackageVersionSuffix)</CaravelaVersion>
        <CaravelaAssemblyVersion>$(MainVersion)</CaravelaAssemblyVersion>
    </PropertyGroup>

    <PropertyGroup>
        <AssemblyVersion>$(CaravelaAssemblyVersion)</AssemblyVersion>
        <Version>$(CaravelaVersion)</Version>
    </PropertyGroup>

    <!-- Versions of dependencies -->
    <PropertyGroup>
        <RoslynVersion>3.11.0</RoslynVersion>
        <CaravelaCompilerVersion>3.11.1011</CaravelaCompilerVersion>
        <MicrosoftCSharpVersion>4.7.0</MicrosoftCSharpVersion>
        <NewtonsoftJsonVersion>13.0.1</NewtonsoftJsonVersion>
        <SystemCollectionsImmutableVersion>5.0.0</SystemCollectionsImmutableVersion>
        <MicrosoftBclHashCodeVersion>1.1.1</MicrosoftBclHashCodeVersion>
        <SystemReflectionMetadataLoadContextVersion>4.7.2</SystemReflectionMetadataLoadContextVersion>
        <K4osHashxxHashVersion>1.0.6</K4osHashxxHashVersion>
        <MicrosoftNETTestSdkVersion>16.11.0</MicrosoftNETTestSdkVersion>
        <xUnitVersion>2.4.1</xUnitVersion>
        <xUnitAbstractionsVersion>2.0.3</xUnitAbstractionsVersion>
        <CoverletVersion>3.1.0</CoverletVersion>

        <!-- this cannot be called just "PostSharpVersion", because that conflicts with a property used by PostSharp -->
        <PostSharpPackageVersion>6.8.7</PostSharpPackageVersion>
        
        <!-- If we're using a local build of Caravela.Compiler, add a local source -->
        <RestoreAdditionalProjectSources Condition="Exists('..\..\Caravela.Compiler\artifacts\packages\Debug\Shipping\Caravela.Compiler.$(CaravelaCompilerVersion).nupkg')">
            $(RestoreAdditionalProjectSources);$(MSBuildThisFileDirectory)..\..\Caravela.Compiler\artifacts\packages\Debug\Shipping
         </RestoreAdditionalProjectSources>
         <RestoreAdditionalProjectSources Condition="Exists('..\..\Caravela.Compiler\artifacts\packages\Release\Shipping\Caravela.Compiler.$(CaravelaCompilerVersion).nupkg')">
            $(RestoreAdditionalProjectSources);$(MSBuildThisFileDirectory)..\..\Caravela.Compiler\artifacts\packages\Release\Shipping
         </RestoreAdditionalProjectSources>
    </PropertyGroup>
    
    

</Project>