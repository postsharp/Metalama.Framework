<Project>

    <PropertyGroup>
        <ContinuousIntegrationBuild Condition="'$(TEAMCITY_VERSION)'!=''">true</ContinuousIntegrationBuild>
    </PropertyGroup>

    <!-- Code quality and documentation -->
    <PropertyGroup Condition="'$(DisableCodeQuality)'!='True'">
        <EnableNETAnalyzers>true</EnableNETAnalyzers>
        <EnforceCodeStyleInBuild>true</EnforceCodeStyleInBuild>
        <GenerateDocumentationFile>true</GenerateDocumentationFile>
        <RunAnalyzersDuringBuild>true</RunAnalyzersDuringBuild>
        <RunAnalyzersDuringLiveAnalysis>true</RunAnalyzersDuringLiveAnalysis>
        <!-- Disable XML doc warnings for now -->
        <NoWarn>1591,1572,1573</NoWarn>
        <WarningLevel>4</WarningLevel>
    </PropertyGroup>
    <PropertyGroup  Condition="'$(DisableCodeQuality)'!='True' AND '$(ContinuousIntegrationBuild)'=='True'">
        <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    </PropertyGroup>
    <ItemGroup Condition="'$(DisableCodeQuality)'!='True'">
        <!-- Beta version fixes issue with record parameter names -->
        <PackageReference Include="StyleCop.Analyzers"
                          Version="1.2.0-beta.333"
                          Condition="'$(EnforceCodeStyleInBuild)'=='True'"
                          PrivateAssets="All" />
        <Content Include="$(MSBuildThisFileDirectory)\stylecop.json"
                 Condition="'$(EnforceCodeStyleInBuild)'=='True'"
                 Pack="false" />
    </ItemGroup>

</Project>