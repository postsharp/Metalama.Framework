<Project>
    <!-- TODO: somehow also set PrivateAssets for aspect libraries -->
    <ItemGroup>
        <PackageReference Update="Metalama.Framework" PrivateAssets="none"/>
        <PackageReference Update="Metalama.Framework.Sdk" PrivateAssets="none"/>
    </ItemGroup>

    <PropertyGroup>
        <MetalamaEnabled Condition="'$(MetalamaEnabled)'==''">True</MetalamaEnabled>
    </PropertyGroup>

    <Import Project="Metalama.CompilerVisibleProperties.props"
            Condition="'$(MetalamaCompilerVisiblePropertiesProjectImported)'==''"/>

    <!-- Implementation of the 'LamaDebug' build configuration.
         It is import to define this in the .props file, and not in the .targets file, because it needs to be processed _before_
         Metalama.Compiler targets file. -->
    
    <PropertyGroup Condition="'$(Configuration)'=='LamaDebug'">
        <MetalamaFormatOutput>True</MetalamaFormatOutput>
        <MetalamaDebugTransformedCode>True</MetalamaDebugTransformedCode>
        <MetalamaEmitCompilerTransformedFiles>True</MetalamaEmitCompilerTransformedFiles>
    </PropertyGroup>


    <ItemGroup>
        <!-- For packages.config projects, it is necessary to explicitly include the analyzer as an ItemGroup. -->
        <Analyzer Include="$(MSBuildThisFileDirectory)/../analyzers/dotnet/cs/*.dll"/>
    </ItemGroup>

    
</Project>